(this.webpackJsonpygocarder=this.webpackJsonpygocarder||[]).push([[0],{121:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},184:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},318:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),o=n(28),i=n.n(o),l=(n(180),n(9)),s=n(45),u=n(27),f=n.n(u),d=n(46),h=n(15),b=(n(181),n(182),{fillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1}),p={frame:"fusion",foil:"normal",name:"Junko",nameStyleType:"auto",nameStyle:{fillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1},attribute:"LIGHT",subFamily:"NO ICON",star:6,picture:"https://i.imgur.com/h5kXZeC.png",pictureCrop:{x:0,y:12,width:269,height:269,unit:"px",aspect:1},link_map:["1","3","7","9"],isPendulum:!1,pendulum_effect:"Once per turn: You can pay 800 LP, increase this card's Pendulum Scale by 1.",red_scale:"4",blue_scale:"4",type_ability:["Fairy","Fusion","Effect"],effect:"[2+ Effect Monsters]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter.",set_id:"YGOC-EN001",atk:"2000",def:"2000",passcode:"18111996",sticker:"holo5",isFirstEdition:!0,creator:"\xa92020 Studio Dice/SHUEISHA TV TOKYO, KONAMI"},v=[{name:"normal",color:"#fff",backgroundColor:"#c49c5e"},{name:"effect",color:"#fff",backgroundColor:"#b96c49"},{name:"fusion",color:"#fff",backgroundColor:"#8948a4"},{name:"synchro",color:"#000",backgroundColor:"#efefef"},{name:"xyz",color:"#fff",backgroundColor:"#000"},{name:"link",color:"#fff",backgroundColor:"#0c8ac6"},{name:"ritual",color:"#fff",backgroundColor:"#5e85c9"},{name:"spell",color:"#fff",backgroundColor:"#1b8f83"},{name:"trap",color:"#fff",backgroundColor:"#c32a8c"},{name:"token",color:"#fff",backgroundColor:"#6f6c6b"}],m=["NO ICON","FIELD","CONTINUOUS","QUICK-PLAY","RITUAL","COUNTER"],j={gold:{fillStyle:"#b88c43",shadowColor:"#FCC400",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0},platinum:{fillStyle:"#CCCCCC",shadowColor:"#FFFFFF",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0}},g=[{name:"normal",color:"#747b95",textStyle:b},{name:"gold",color:"#cfa65f"},{name:"platinum",color:"#b1b1b1"}],x=function(e){return"xyz"===e.frame},O=function(e){return"link"===e.frame&&w(e)},w=function(e){return"spell"!==e.frame&&"trap"!==e.frame},C=function(e){var t,n;return null!==(t=null===(n=v.find((function(t){return t.name===e.toLowerCase()})))||void 0===n?void 0:n.name)&&void 0!==t?t:"effect"},y=n(147),k=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=[],a=127;--a;)(48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=a||"-_.!~*'()".includes(String.fromCharCode(a)))&&n.push(String.fromCharCode(a));for(a=32;255>a;++a){var r=String.fromCharCode(a);"\\"==r||n.includes(r)||n.unshift(r)}e=e.replace(/\u0001/g,""),e=T(e),a=n.length,r="";for(var c={},o=2;o<t;o++)for(var i=0;i<e.length-o;++i){var l=e.substr(i,o);if(!c[l]){var s=l.charCodeAt(0),u=l.charCodeAt(l.length-1);if(!(s=56320<=s&&57343>=s||55296<=u&&56319>=u)){for(s=1,u=e.indexOf(l,i+o);0<=u;++s)u=e.indexOf(l,u+o);1<s&&(c[l]=s)}}}for(;;){for(;a--&&e.includes(n[a]););if(0>a)break;t=n[a];var f=void 0;for(var d in o=0,i=encodeURI(encodeURIComponent(t)).replace(/%../g,"i").length,c)l=((l=c[d])-1)*encodeURI(encodeURIComponent(d)).replace(/%../g,"i").length-(l+1)*i,r.length||(l-=encodeURI(encodeURIComponent("\x01")).replace(/%../g,"i").length),0>=l?delete c[d]:l>o&&(f=d,o=l);if(!f)break;for(var h in e=e.split(f).join(t)+t+f,r=t+r,o={},c){for(c=h.split(f).join(t),i=0,l=e.indexOf(c);0<=l;++i)l=e.indexOf(c,l+c.length);1<i&&(o[c]=i)}c=o}return f=e,(n=r).length&&(f+="\x01"+n),encodeURIComponent(f+"_")},S=function(e){var t=(e=e.substring(0,e.length-1)).split("\x01");if(e=t[0],1<t.length){t=t[1];var n,a=Object(y.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;e=(e=e.split(r)).join(e.pop())}}catch(c){a.e(c)}finally{a.f()}}return T(e,0)},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],a=function(e,t){return e.replace(new RegExp("".concat((t[2]?t[2]:"")+t[0],"|").concat((t[3]?t[3]:"")+t[1]),"g"),(function(e){return e===t[0]?t[1]:t[0]}))};if(t)for(t=0;t<n.length;++t)e=a(e,n[t]);else for(t=n.length;t--;)e=a(e,n[t]);return e},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=e,a=t,r=a,c=r,o=30,i=100,l=function(){return 1===i?m():(r+=i,r-=i/=10),Math.min(r,a)},s=function(){return o-=1,r-=i},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;n=e,a=t,r=t,o=30,i=100,c=t},f=function(){return r},d=function(e){return r=e},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return c=e},b=function(){return c},p=function(){return o=-1,r=c},v=function(){return o},m=function(){return o=-1};return{reset:u,searchDown:s,reverseSearch:l,finish:m,getMedian:f,setMedian:d,setLastEffective:h,getLastEffective:b,applyLastEffective:p,getIterateCount:v}},N={frame:"fr",foil:"fo",name:"na",nameStyleType:"nst",nameStyle:{_newKey:"ns",fillStyle:"nsfs",shadowColor:"nssc",shadowOffsetY:"nssoy",shadowOffsetX:"nssox",shadowBlur:"nssb",hasShadow:"nshs"},attribute:"at",subFamily:"sf",star:"st",picture:"pt",pictureCrop:{_newKey:"ptc",x:"ptx",y:"pty",width:"ptw",height:"pth",unit:"ptu",aspect:"pta"},link_map:"lm",isPendulum:"ip",pendulum_effect:"pe",red_scale:"rs",blue_scale:"bs",type_ability:"ta",effect:"ef",set_id:"si",atk:"atk",def:"def",passcode:"pc",sticker:"sti",isFirstEdition:"ife",creator:"cr"},I=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r={};if(Object.keys(t).forEach((function(a){var c=t[a];if("object"!==typeof c||null===c||Array.isArray(c)){var o=n[a];"string"===typeof o&&(r[o]=c)}else{var i,l=null===(i=n[a])||void 0===i?void 0:i._newKey;l&&(r[l]=e(c,n[a],!1))}})),a){var c=k(JSON.stringify(r));return console.log("\ud83d\ude80 ~ file: condenser.ts ~ line 132 ~ curshedCard",r,c),c}return r},E=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,a="string"===typeof t?JSON.parse(S(decodeURIComponent(t))):t,r={};return Object.keys(n).forEach((function(t){var c=n[t];if("object"!==typeof c||null===c||Array.isArray(c))a[c]&&(r[t]=a[c]);else{var o=null===c||void 0===c?void 0:c._newKey;o&&a[o]&&(r[t]=e(a[o],n[t]))}})),r},P=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="",a=e.length,r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*a));return n},F=function(){return"".concat(P("ABCDEFGHIJKLMNOPQRSTUVWXYZ",4),"-EN").concat(P("0123456789",3))},L=function(){return"".concat(P("0123456789",8))},A=function(e){var t,n,a,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=e,o="",i=/^(\[([^\]]*)\]\s*)/m,l=null===(t=i.exec(c))||void 0===t?void 0:t[1],s=null===(n=i.exec(c))||void 0===n?void 0:n[2];s&&l?(o=s,c=c.replace(l,"")):o="";var u="",f=/(\n^[\r\t\f\v \u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]*\([\w\W]+\))\s*$/m,d=null===(a=f.exec(e))||void 0===a?void 0:a[1];return d&&r?(u=d,c=c.replace(d,"")):u="",{material:o,body:c,flavorCondition:u}},B=function(e){var t=null!==e&&void 0!==e?e:"";return t=t.replace(/(^|[-\u2014\s(["])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/[(\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/--/g,"\u2014")};function _(e,t){if(window.history.pushState){var n=new URLSearchParams(window.location.search);n.set(e,t);var a=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+n.toString();window.history.pushState({path:a},"",a)}}var z=n(55),M=n(330),U=n(86),D=n(332),Y=n(331),H=n(173),X=n(148),G=n.n(X);n(183),n(184);var W=function(e){var t=e.noRedrawNumber,n=void 0===t?0:t,c=e.defaultExternalSource,o=void 0===c?"":c,i=e.previewCanvasRef,s=e.children,u=e.ratio,f=void 0===u?1:u,d=e.defaultCropInfo,b=e.onSourceChange,p=void 0===b?function(){}:b,v=e.onImageChange,m=void 0===v?function(){}:v,j=Object(r.useState)("external"),g=Object(h.a)(j,2),x=g[0],O=g[1],w=Object(r.useState)(""),C=Object(h.a)(w,2),y=C[0],k=C[1],S=Object(r.useState)(o),T=Object(h.a)(S,2),R=T[0],N=T[1],I=Object(r.useRef)(null),E=Object(r.useState)(d),P=Object(h.a)(E,2),F=P[0],L=P[1],A=Object(r.useState)(null),B=Object(h.a)(A,2),_=B[0],z=B[1],U=Object(r.useCallback)((function(e){I.current=e}),[]);return Object(r.useEffect)((function(){var e,t,n,a,r=I.current,c=i,o=_;if(o&&c&&r){var l=c.getContext("2d");if(l){var s=r.naturalWidth/r.width,u=r.naturalHeight/r.height,f=window.devicePixelRatio,d=Math.ceil(c.getBoundingClientRect().width),h=Math.ceil(c.getBoundingClientRect().height);c.width=(null!==d&&void 0!==d?d:0)*f,c.height=(null!==h&&void 0!==h?h:0)*f,l.setTransform(f,0,0,f,0,0),l.imageSmoothingQuality="high",l.drawImage(r,(null!==(e=o.x)&&void 0!==e?e:0)*s,(null!==(t=o.y)&&void 0!==t?t:0)*u,(null!==(n=o.width)&&void 0!==n?n:0)*s,(null!==(a=o.height)&&void 0!==a?a:0)*u,0,0,null!==d&&void 0!==d?d:0,null!==h&&void 0!==h?h:0),m(o)}}}),[_,i,n]),Object(a.jsxs)("div",{className:"card-image-cropper",children:[Object(a.jsxs)("div",{className:"card-image-source-input",children:[s,Object(a.jsxs)(Y.a.Group,{onChange:function(e){return O(e.target.value)},value:x,children:[Object(a.jsx)(Y.a.Button,{value:"external",children:Object(a.jsx)(M.a,{addonBefore:"Link",placeholder:"https://my-online-image...",value:R,onChange:function(e){var t=e.target.value;p(t),N(t)},maxLength:256},"key")}),Object(a.jsxs)(Y.a.Button,{value:"internal",children:[Object(a.jsx)(M.a,{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){"string"===typeof t.result&&(k(t.result),O("internal"))})),t.readAsDataURL(e.target.files[0])}}}),Object(a.jsx)("div",{children:"internal"===x&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H.a,{className:"download-button",disabled:!(null===_||void 0===_?void 0:_.width)||!(null===_||void 0===_?void 0:_.height),onClick:function(){return i&&function(e,t){t&&e&&e.toBlob((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.download="cropPreview.png",n.href=URL.createObjectURL(e),n.click(),window.URL.revokeObjectURL(t)}),"image/png",1)}(i,_)},children:"Download cropped image"}),Object(a.jsx)("span",{style:{color:"#FF6F6F"},children:"Offline images are not auto saved!"})]})})]})]})]}),Object(a.jsx)("div",{className:"card-cropper",children:Object(a.jsx)(G.a,{src:"internal"===x?y:R,onImageLoaded:U,crop:F,onChange:function(e){return L(Object(l.a)(Object(l.a)({},e),{},{aspect:f}))},onComplete:function(e){return z(e)},ruleOfThirds:!0},x)})]})},K=(n(208),function(e){var t=e.defaultValue,n=void 0===t?[]:t,c=e.onChange,o=void 0===c?function(){}:c,i=Object(r.useState)(n),l=Object(h.a)(i,2),u=l[0],f=l[1],d=[-45,0,45,-90,0,90,-135,180,135],b=JSON.stringify(u);return Object(r.useEffect)((function(){o(u)}),[b]),Object(a.jsxs)("div",{className:"link-marker-chooser",children:[Object(a.jsx)("div",{className:"title",children:"Link Arrows"}),Object(a.jsx)("div",{className:"container",children:Object(s.a)(Array(9)).map((function(e,t){var n="".concat(t+1);return"5"===n?Object(a.jsx)(U.a,{overlay:"Reset",children:Object(a.jsx)("div",{className:"link-marker-reset",onClick:function(){f([])},children:"R"})},"5"):Object(a.jsx)("div",{className:"link-marker-button marker-".concat(t+1," ").concat(u.includes(n)?"marker-checked":""),onClick:function(){f((function(e){var t=Object(s.a)(e);return t.includes(n)?t=t.filter((function(e){return e!==n})):t.push(n),t}))},children:Object(a.jsx)("div",{className:"link-marker-icon link-marker-icon-".concat(t+1),style:{transform:"rotate(".concat(d[t],"deg)")}})},n)}))})]})}),J=n(52),V=n(336),q=(n(121),g.map((function(e){var t=e.color,n=e.name;return{label:n.toLocaleUpperCase(),value:n,props:{style:{color:t,fontWeight:"bold"}}}}))),Q=v.map((function(e){var t=e.color,n=e.name;return{label:n,value:n,props:{style:{backgroundColor:e.backgroundColor,color:t}}}})),Z=[{name:"DARK",color:"#b41dda"},{name:"EARTH",color:"#8d8e8e"},{name:"FIRE",color:"#e51b23"},{name:"LIGHT",color:"#bfae32"},{name:"WATER",color:"#008ecd"},{name:"WIND",color:"#28ab35"},{name:"DIVINE",color:"#ef6300"},{name:"SPELL",color:"#1b8f83"},{name:"TRAP",color:"#c32a8c"}].map((function(e){var t=e.name;return{label:Object(a.jsx)("img",{alt:t,src:"".concat("/ygocarder","/asset/image/attribute/attr-").concat(t.toLowerCase(),".png")}),value:t}})),$=m.map((function(e){return{label:e,value:e}})),ee=Object(s.a)(Array(14)).map((function(e,t){return{label:t,value:t}})),te=["gold","silver","beta","holo5","holo4","holo3","holo2","holo1"].map((function(e){return{label:Object(a.jsx)("img",{alt:e,src:"".concat("/ygocarder","/asset/image/sticker/sticker-").concat(e.toLowerCase(),".png")}),value:e}})),ne=n(170),ae=n(334);n(209);var re=function(e){var t=e.targetId,n=void 0===t?"":t,c=e.onPick,o=void 0===c?function(){}:c,i=Object(r.useState)(null),l=Object(h.a)(i,2),s=l[0],u=l[1],f=function(e){var t=document.getElementById(n);if(t){var a=function(e,t){if(document.selection)return e.focus(),document.selection.createRange().text=t,{value:e.value,position:0};if(e.selectionStart||0===e.selectionStart){var n=e.selectionStart,a=e.selectionEnd;return e.value=e.value.substring(0,n)+t+e.value.substring(a,e.value.length),e.selectionStart=n+t.length,e.selectionEnd=n+t.length,e.focus(),{value:e.value,position:n+t.length}}return e.value+=t,{value:e.value,position:0}}(t,e).value;o(a)}};Object(r.useEffect)((function(){u(document.getElementById("char-picker"))}),[]);var d=Object(r.useCallback)((function(e){var t=e.target,n=e.left,a=e.top,r=e.transform;t.style.left="".concat(n,"px"),t.style.top="".concat(a,"px"),t.style.transform=r}),[]);return Object(a.jsxs)("div",{className:"char-picker-container",children:[Object(a.jsxs)("div",{id:"char-picker",className:"char-picker",children:[Object(a.jsx)("div",{className:"handler",children:Object(a.jsx)(ae.a,{})}),["\u221e","\u2606","\u25cf","\xa9","\u2122","\u2c6f"].map((function(e){return Object(a.jsx)("button",{className:"ant-btn",onClick:function(){return f(e)},children:e},e)}))]}),Object(a.jsx)(ne.a,{target:s,container:null,edge:!1,draggable:!0,throttleDrag:0,onDrag:d})]})},ce=n(333),oe=n(328),ie=n(114),le=n(335),se=n(172),ue=(n(318),c.a.memo((function(e){var t=e.defaultType,n=e.defaultValue,c=e.onChange,o=Object(r.useState)(t),i=Object(h.a)(o,2),s=i[0],u=i[1],f=Object(r.useState)(n),d=Object(h.a)(f,2),b=d[0],p=d[1],v=Object(r.useState)(!1),m=Object(h.a)(v,2),j=m[0],g=m[1],x=Object(r.useRef)(Object(J.debounce)(c,250)).current,O=function(e){return function(t){p((function(n){var a=Object(l.a)(Object(l.a)({},n),{},Object(z.a)({},e,t));return x("custom",a),a}))}};return Object(a.jsxs)("div",{className:"style-picker",children:[Object(a.jsx)("div",{className:"style-picker-preview",style:"auto"===s?{}:{boxShadow:"".concat(b.shadowOffsetX,"px ").concat(b.shadowOffsetY,"px ").concat(b.shadowBlur,"px 0 ").concat(b.shadowColor)},onClick:function(){return g((function(e){return!e}))},children:Object(a.jsx)("div",{className:"style-picker-display",style:"auto"===s?{background:"white"}:{background:b.fillStyle},children:"auto"===s?"Auto":Object(a.jsx)(a.Fragment,{children:"\xa0"})})}),j?Object(a.jsxs)("div",{className:"style-picker-overlay",style:{position:"absolute",zIndex:2},children:[Object(a.jsx)("div",{className:"style-picker-mask",onClick:function(){return g(!1)}}),Object(a.jsxs)("div",{className:"style-picker-auto",children:[Object(a.jsx)(D.a,{value:"auto",checked:"auto"===s,onChange:function(){var e="auto"===s?"custom":"auto";u(e),x(e,b)},children:"Auto"}),Object(a.jsx)(le.a,{className:"style-picker-close",onClick:function(){return g(!1)}})]}),Object(a.jsxs)("div",{className:"custom-style-picker",children:[Object(a.jsxs)("div",{className:"custom-style-text",children:[Object(a.jsx)("h2",{children:"Text Color"}),Object(a.jsx)(ie.a,{color:b.fillStyle,onChange:function(e){u("custom"),p((function(t){var n=Object(l.a)(Object(l.a)({},t),{},{fillStyle:e.hex});return x("custom",n),n}))}})]}),Object(a.jsx)("h3",{className:"custom-style-expand",children:Object(a.jsx)(D.a,{value:"has-shadow",checked:b.hasShadow,onChange:function(){u("custom"),p((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{hasShadow:!e.hasShadow});return x("custom",t),t}))},children:"Has Shadow?"})}),b.hasShadow&&Object(a.jsxs)("div",{className:"custom-style-shadow",children:[Object(a.jsx)("h2",{children:"Position"}),Object(a.jsxs)("div",{className:"shadow-position",children:[Object(a.jsx)(se.a,{axis:"xy",styles:{track:{backgroundColor:"#009ce0",width:100,height:100,gridRow:"span 3",position:"relative"},thumb:{backgroundColor:"#91d5ff",zIndex:10}},xmax:5,xmin:-5,ymax:5,ymin:-5,x:b.shadowOffsetX,y:b.shadowOffsetY,onChange:function(e){var t=e.x,n=e.y;p((function(e){var a=Object(l.a)(Object(l.a)(Object(l.a)({},e),e),{},{shadowOffsetX:t,shadowOffsetY:n});return x("custom",a),a}))}}),Object(a.jsxs)("div",{className:"single-slider",children:["X Offset: ",Object(a.jsx)(ce.a,{size:"small",value:b.shadowOffsetX,onChange:O("shadowOffsetX")})]}),Object(a.jsxs)("div",{className:"single-slider",children:["Y Offset: ",Object(a.jsx)(ce.a,{size:"small",value:b.shadowOffsetY,onChange:O("shadowOffsetY")})]}),Object(a.jsxs)("div",{className:"single-slider",children:["Blur: ",Object(a.jsx)(oe.a,{value:b.shadowBlur,min:0,max:10,onChange:function(e){"number"===typeof e&&p((function(t){var n=Object(l.a)(Object(l.a)({},t),{},{shadowBlur:e});return x("custom",n),n}))}})]}),Object(a.jsx)("div",{})]}),Object(a.jsx)("h2",{children:"Color"}),Object(a.jsx)(ie.a,{color:b.shadowColor,onChange:function(e){p((function(t){var n=Object(l.a)(Object(l.a)({},t),{},{shadowColor:e.hex});return x("custom",n),n}))}})]})]})]}):null]})}),(function(){return!0}))),fe=function(e){var t=e.onChange,n=e.value,r=e.optionList,c=e.children,o=["ant-radio-group ant-radio-group-outline checkbox-train",e.className].join(" ");return Object(a.jsxs)("div",{className:o,children:[c&&Object(a.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:c}),r.map((function(e){var r="".concat(e.value)==="".concat(n);return Object(a.jsxs)("label",Object(l.a)(Object(l.a)({},e.props),{},{className:"ant-radio-button-wrapper ".concat(r?"ant-radio-button-wrapper-checked":""),onClick:function(){t(e.value)},children:[Object(a.jsx)("span",{className:"ant-radio-button ".concat(r?"ant-radio-button-checked":""),children:Object(a.jsx)("span",{className:"ant-radio-button-inner"})}),Object(a.jsx)("span",{children:e.label})]}),e.value)}))]})},de=M.a.TextArea,he=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(a){t((function(t){var r;return Object(l.a)(Object(l.a)({},t),{},Object(z.a)({},e,n("string"===typeof a||"number"===typeof a||Array.isArray(a)?a:null===a||void 0===a||null===(r=a.target)||void 0===r?void 0:r.value)))}))}},be=function(e){var t=e.seeder,n=e.onGenerate;return Object(a.jsx)("span",{style:{marginLeft:10,paddingLeft:10,borderLeft:"1px solid #222"},children:Object(a.jsx)(U.a,{overlay:"Random",children:Object(a.jsx)(V.a,{onClick:function(){return n(t())}})})})},pe=function(e){var t=e.currentCard,n=e.receivingCanvasRef,c=e.defaultCropInfo,o=e.onCardChange,i=e.onImageChange,s=e.children,u=Object(r.useState)(!0),f=Object(h.a)(u,2),d=f[0],b=f[1],p=function(e){o((function(t){return e(t)}))},v=he("foil",p),m=he("attribute",p),j=he("subFamily",p),g=Object(J.debounce)(he("name",p),250),C=he("star",p),y=he("picture",p),k=he("link_map",p),S=he("red_scale",p),T=he("blue_scale",p),R=Object(J.debounce)(he("pendulum_effect",p),250),N=Object(J.debounce)(he("effect",p),250),I=he("atk",p),E=he("def",p),P=Object(J.debounce)((function(e){p((function(t){return Object(l.a)(Object(l.a)({},t),{},{type_ability:e.map((function(e){return"".concat(e)}))})}))}),250),A=he("set_id",p),B=he("passcode",p),_=he("sticker",p),z=he("creator",p),U=t.frame,Y=t.foil,H=t.name,X=t.nameStyleType,G=t.nameStyle,V=t.picture,ne=t.effect,ae=t.type_ability,ce=t.isPendulum,oe=t.pendulum_effect,ie=t.red_scale,le=t.blue_scale,se=t.atk,pe=t.def,ve=t.link_map,me=t.attribute,je=t.subFamily,ge=t.star,xe=t.set_id,Oe=t.passcode,we=t.isFirstEdition,Ce=t.creator,ye=t.sticker,ke=x(t),Se=O(t),Te=w(t),Re=Object(r.useState)(ae.join("/")),Ne=Object(h.a)(Re,2),Ie=Ne[0],Ee=Ne[1],Pe=Object(r.useState)(H),Fe=Object(h.a)(Pe,2),Le=Fe[0],Ae=Fe[1],Be=Object(r.useState)(ne),_e=Object(h.a)(Be,2),ze=_e[0],Me=_e[1],Ue=Object(r.useState)(oe),De=Object(h.a)(Ue,2),Ye=De[0],He=De[1],Xe=Object(r.useState)(""),Ge=Object(h.a)(Xe,2),We=Ge[0],Ke=Ge[1],Je=Object(r.useRef)();return Object(a.jsxs)("div",{className:"card-info-panel",children:[s,Object(a.jsx)(re,{targetId:We,onPick:function(e){var t,n,a;Je.current&&(null===(t=Je.current)||void 0===t||null===(n=t.props)||void 0===n||null===(a=n.onChange)||void 0===a||a.call(n,{target:{value:e}}))}}),Object(a.jsx)(fe,{className:"foil-radio",value:Y,onChange:v,optionList:q,children:Object(a.jsx)("span",{children:"Foil"})}),Object(a.jsx)(fe,{className:"frame-radio",value:U,onChange:function(e){o((function(t){var n="".concat(e),a="spell"===n||"trap"===n,r="spell"===n?["Spell Card"]:"trap"===n?["Trap Card"]:t.type_ability;return a&&Ee(r[0]),Object(l.a)(Object(l.a)({},t),{},{frame:n,isPendulum:"link"!==n&&"token"!==n&&!a&&t.isPendulum,subFamily:a?"NO ICON":t.subFamily,attribute:a?"".concat(n).toUpperCase():t.attribute,type_ability:"spell"===n?["Spell Card"]:"trap"===n?["Trap Card"]:t.type_ability})}))},optionList:Q}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"card-header custom-gap",children:[Object(a.jsx)(M.a,{id:"name",ref:"name"===We?Je:null,onFocus:function(){return Ke("name")},allowClear:!0,addonBefore:Object(a.jsxs)(a.Fragment,{children:["Name ",Object(a.jsx)(ue,{defaultType:X,defaultValue:G,onChange:function(e,t){o((function(n){return Object(l.a)(Object(l.a)({},n),{},{nameStyleType:e,nameStyle:t})}))}})]}),placeholder:"Card Name",value:Le,className:"name-input",onChange:function(e){g(e),Ae(e.target.value)}}),Te?Se?null:Object(a.jsx)(fe,{value:"".concat(ge),onChange:C,optionList:ee,children:Object(a.jsx)("span",{children:ke?"Rank":"Level"})}):Object(a.jsx)(fe,{value:je,onChange:j,optionList:$,children:Object(a.jsx)("span",{children:"Icon"})}),Object(a.jsx)(fe,{className:"checkbox-image-train",value:me,onChange:m,optionList:Z,children:Object(a.jsx)("span",{children:"Attribute"})})]}),Object(a.jsxs)("div",{className:"main-info",children:[Object(a.jsxs)("div",{className:"main-info-first",children:[Object(a.jsx)(M.a,{id:"set-id",ref:"set-id"===We?Je:null,onFocus:function(){return Ke("set-id")},allowClear:!0,className:"set-id-input",addonBefore:Object(a.jsxs)(a.Fragment,{children:["Set ID",Object(a.jsx)(be,{seeder:F,onGenerate:A})]}),onChange:A,placeholder:"Set ID",value:xe}),Te&&"link"!==U&&"token"!==U&&Object(a.jsxs)("div",{className:"pendulum-container",children:[Object(a.jsxs)("div",{className:"joined-row",children:[Object(a.jsx)(D.a,{onChange:function(e){return o((function(t){return Object(l.a)(Object(l.a)({},t),{},{isPendulum:e.target.checked})}))},checked:ce,children:"Is Pendulum?"}),ce&&Object(a.jsx)(D.a,{onChange:function(e){return b(e.target.checked)},checked:d,children:"Mirror Scale?"})]}),ce&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{addonBefore:Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{style:{color:"#3b9dff"},children:"Blue"})," Scale"]}),value:le,onChange:function(e){T(e),d&&S(e)}},"blue-scale")}),Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{addonBefore:Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{style:{color:"#ff6f6f"},children:"Red"})," Scale"]}),value:ie,onChange:function(e){d&&T(e),S(e)}},"red-scale")}),Object(a.jsx)("div",{className:"joined-row",style:{position:"relative"},children:Object(a.jsx)(de,{id:"pendulum-effect",ref:"pendulum-effect"===We?Je:null,onFocus:function(){return Ke("pendulum-effect")},allowClear:!0,placeholder:"Pendulum effect",value:Ye,onChange:function(e){R(e),He(e.target.value)},rows:6},"pendulum-effect")})]})]}),Object(a.jsx)(M.a,{addonBefore:"Type",id:"type",ref:"type"===We?Je:null,onFocus:function(){return Ke("type")},allowClear:!0,onChange:function(e){var t=e.target.value;Ee(t),P(t.split("/").map((function(e){return e.trim()})).filter((function(e){return"string"===typeof e&&e.length>0})))},placeholder:"Type / Ability",style:{width:"100%"},value:Ie}),Object(a.jsx)(de,{id:"card-effect",ref:"card-effect"===We?Je:null,onFocus:function(){return Ke("card-effect")},allowClear:!0,placeholder:"Card effect",value:ze,rows:10,onChange:function(e){N(e),Me(e.target.value)}},"effect"),Object(a.jsxs)("div",{className:"card-footer-input",children:[Te?Object(a.jsx)(M.a,{id:"atk",ref:"atk"===We?Je:null,onFocus:function(){return Ke("atk")},addonBefore:"ATK",allowClear:!0,value:se,onChange:I},"atk"):Object(a.jsx)("div",{}),Te?Object(a.jsx)(M.a,{id:"def",ref:"def"===We?Je:null,onFocus:function(){return Ke("def")},addonBefore:"DEF",allowClear:!0,value:pe,onChange:E},"def"):Object(a.jsx)("div",{}),Object(a.jsx)(M.a,{id:"password",ref:"password"===We?Je:null,onFocus:function(){return Ke("password")},allowClear:!0,className:"password-input",addonBefore:Object(a.jsxs)(a.Fragment,{children:["Password",Object(a.jsx)(be,{seeder:L,onGenerate:B})]}),onChange:B,placeholder:"Password",value:Oe}),Object(a.jsx)(D.a,{className:"input-1st",onChange:function(e){return o((function(t){return Object(l.a)(Object(l.a)({},t),{},{isFirstEdition:e.target.checked})}))},checked:we,children:"Is 1st Edition?"}),Object(a.jsx)(M.a,{addonBefore:"Creator",id:"creator",ref:"creator"===We?Je:null,onFocus:function(){return Ke("creator")},allowClear:!0,className:"creator-input",onChange:z,placeholder:"Creator",value:Ce}),Object(a.jsx)(fe,{className:"sticker-input checkbox-image-train",value:ye,onChange:_,optionList:te,children:Object(a.jsx)("span",{children:"Sticker"})})]})]}),Object(a.jsx)("div",{className:"main-info-second",children:Object(a.jsx)(W,{noRedrawNumber:1,defaultExternalSource:V,defaultCropInfo:c,previewCanvasRef:n,onSourceChange:y,onImageChange:i,children:Se?Object(a.jsx)(K,{defaultValue:ve,onChange:k}):Object(a.jsx)("div",{})})})]},"pic")]})},ve=n(337),me=n(339),je=(n(324),c.a.memo((function(){var e;return Object(a.jsxs)("div",{className:"app-header",children:[Object(a.jsx)("img",{alt:"app-logo",src:"".concat("/ygocarder","/logo192.png"),width:48}),Object(a.jsxs)("div",{className:"app-description",children:[Object(a.jsxs)("h1",{children:["Yugioh Carder ",Object(a.jsxs)("small",{children:["v",null!==(e="1.0.5")?e:"unknown"]})]}),Object(a.jsxs)("div",{className:"app-contribution",children:[Object(a.jsxs)("span",{children:["GUI: ",Object(a.jsx)("b",{children:"Lauqerm"})]}),Object(a.jsxs)("span",{children:["Template: ",Object(a.jsx)("b",{children:"Grezar"})," and others (",Object(a.jsx)("a",{href:"https://www.deviantart.com/grezar/art/SKILL-UPDATE-Series-10-Card-Proxy-Template-686736691",target:"_blank",rel:"noreferrer",children:"Deviant Art"}),")"]}),Object(a.jsx)(me.a,{overlayClassName:"disclaimer-overlay",content:Object(a.jsxs)("div",{className:"disclaimer",children:[Object(a.jsx)("h2",{children:"Disclaimer"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:'This is a personal project, not an "official" card maker.'}),Object(a.jsx)("li",{children:"I holds no liability for cards created by this app, including picture, card text and any product that related to it."}),Object(a.jsx)("li",{children:"I do not own any of Yu-Gi-Oh card layers and fonts use in this project."}),Object(a.jsxs)("li",{children:["If you want to modify card layers, or use it in any public project, please contact ",Object(a.jsx)("a",{href:"https://www.deviantart.com/grezar",target:"_blank",rel:"noreferrer",children:"Grezar"})," directly."]})]})]}),children:Object(a.jsx)(ve.a,{className:"disclaimer-icon"})})]})]})]})}),(function(){return!0}))),ge=[{fontSize:17,lineHeight:17,lineCount:6},{fontSize:14,lineHeight:14,lineCount:7},{fontSize:12,lineHeight:12,lineCount:8},{fontSize:11,lineHeight:11,lineCount:9},{fontSize:10,lineHeight:10,lineCount:10},{fontSize:9,lineHeight:9,lineCount:11},{fontSize:8,lineHeight:8,lineCount:12}],xe=[{width:463,top:620,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89}],Oe=[{fontSize:16.41,lineHeight:16.44,lineCount:5},{fontSize:16.41,lineHeight:16.44,lineCount:5}],we=[{width:375,top:504.5,left:87.05},{width:375,top:504.5,left:87.05}],Ce=[{fontSize:16.41,lineHeight:16.74,lineCount:8},{fontSize:13.46,lineHeight:14.28,lineCount:10}],ye=[{width:461,top:601,left:45},{width:461,top:601,left:45}],ke={small:{top:622,left:43,bracketSize:{char:18.71,bracketSpace:8.51,bracketOffsetTop:1.64},upperCaseSize:20,upperCaseScale:1,lowerCaseSize:16,lowerCaseScale:1.1,spaceScale:1,spaceSize:{frontSpace:5,char:21,behindSpace:15},iconSpace:0},medium:{top:620.8,left:43,bracketSize:{char:19.69,bracketSpace:8.51,bracketOffsetTop:1.64},upperCaseSize:21,upperCaseScale:1,lowerCaseSize:18,lowerCaseScale:.95,spaceScale:1,spaceSize:{frontSpace:5,char:23,behindSpace:15},iconSpace:0},large:{top:126,left:494,bracketSize:{char:25,bracketSpace:11,bracketOffsetTop:2},upperCaseSize:26,upperCaseScale:1.1,lowerCaseSize:23,lowerCaseScale:1,spaceScale:1.4,spaceSize:{frontSpace:5,char:23,behindSpace:15},iconSpace:32}},Se=[{top:126,left:46,width:50,height:51},{top:116,left:226,width:99,height:32},{top:126,left:453,width:51,height:51},{top:305,left:35,width:33,height:99},{top:0,left:0,width:0,height:0},{top:305,left:482,width:32,height:99},{top:534,left:46,width:50,height:50},{top:562,left:226,width:99,height:33},{top:534,left:453,width:51,height:50}],Te={gold:{art:{left:2}},platinum:{art:{left:1}}},Re=function(e,t,n,a){if(e){var r="".concat(t).split(""),c=0;r.forEach((function(t){c+="1"===t?.65*e.measureText(t).width:e.measureText(t).width}));var o=n-c/2;r.forEach((function(t){e.fillText(t,"1"===t?o-3:o,a),o+="1"===t?.65*e.measureText(t).width:e.measureText(t).width}))}},Ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ge,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:xe,o=B(t),i=0;if(e){var l=function(){for(var t={1:645,2:665,3:685},l=n?{body:o,flavorCondition:"",material:""}:A(o,a),s=l.body,u=l.flavorCondition,f=l.material,d=(f.length>0?1:0)+(u.length>0?1:0),h=s.split("\n"),b="\u25cf",p="#@\u221e",v=new RegExp("([".concat(p).concat("\\s-","])"),"g"),m=new RegExp(p,"g"),j=function(){var n,o=r[i],l=o.fontSize,s=o.lineHeight,j=o.lineCount,g=c[i],x=g.left,O=g.width,w=g.top,C=a?O-2:O,y=R(),k=1e3,S=Math.max(h.length,j);e.font="".concat(a?"italic":""," ").concat(l,"px MatrixBook"),e.textAlign="left";for(var T=function(t){var n=e.font,a=1.15*l;e.font=n.replace("MatrixBook","matrix").replace("".concat(l),"".concat(a)),t(),e.font=n},N=[];y.getIterateCount()>=0;){if(y.getIterateCount()<=0){k=y.getMedian();break}if((N=[],h.reduce((function(t,n){for(var a=y.getMedian()/1e3,r=C/a,c=n.split(v),o=1,i=[],l=0,s=function(t){var n=0;if(c[t]===b?n=15/a:m.test(c[t])?T((function(){n=e.measureText(c[t]).width})):n=e.measureText(c[t]).width,l+n>r){var s=i.join("").trim(),u=s.split(b);N.push({text:s,width:u.reduce((function(t,n){return t+e.measureText(n).width}),0)+15*(u.length-1)/a,isLast:!1}),l=n,i=[c[t]],o+=1}else l+=n,i.push(c[t])},u=0;u<c.length;u++)s(u);var f=i.join("").trim(),d=f.split(b);return N.push({text:f,width:d.reduce((function(t,n){return t+e.measureText(n).width}),0)+15*(d.length-1)/a,isLast:!0}),t+o}),0)+d)>S)y.searchDown();else{if(1e3===y.getMedian())break;k=y.reverseSearch()}}var I=function(e,t,n){e.beginPath(),e.arc(t+7,n-5.5,5.5,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.strokeStyle="#003300",e.stroke()};if(!(k<(null!==(n=t["".concat(h.length)])&&void 0!==n?n:t[3])&&i<r.length-1)){null===e||void 0===e||e.clearRect(0,0,549,750);var E=w+s;if(f.length>0){var P=e.measureText(f).width,F=Math.min(C/P,1);e.scale(F,1),e.fillText(f,x/F,E),E+=s,e.scale(1/F,1)}var L=k/1e3;if(N.forEach((function(t){var n=t.text,a=t.width,r=t.isLast?Math.min(L,1):C/a;if(r<=1){e.scale(r,1);var c=new RegExp("([".concat(b).concat(p,"])"),"g");n.split(c).reduce((function(t,n,a){var c=t;return a%2===0?(e.fillText(n,c/r,E),c+=e.measureText(n).width*r):n===b?(e.scale(1/r,1),I(e,c,E),c+=15,e.scale(r,1)):T((function(){e.fillText(n,c/r,E),c+=e.measureText(n).width*r})),c}),x),E+=s,e.scale(1/r,1)}else{var o=new RegExp("([".concat(b).concat(p," ])"),"g"),i=n.split(o);e.scale(1,1);var l=0,u=0;i.forEach((function(t){" "===t?u+=1:t===b?l+=15:m.test(t)?T((function(){return l+=e.measureText(t).width})):l+=e.measureText(t).width}));var f=u>0?(C-l)/u:0;i.reduce((function(t,n,a){var r=t;return a%2===0?(e.fillText(n,r,E),r+=e.measureText(n).width):n===b?(I(e,r,E),r+=15):" "===n?r+=f:T((function(){e.fillText(n,r,E),r+=e.measureText(n).width})),r}),x),E+=s}})),u.length>0){var A=e.measureText(u).width,B=Math.min(C/A,1);e.font="".concat(l,"px MatrixBook"),e.scale(B,1),e.fillText(u,x/B,E),E+=s,e.scale(1/B,1)}return"break"}i+=1};i<r.length;){if("break"===j())break}return{v:i}}();if("object"===typeof l)return l.v}return i},Ie=function(e,t,n,a,r){if(e){e.textAlign="left";var c=t.split(""),o=a;return c.forEach((function(t){e.fillText(t,o,r),o+=e.measureText(t).width*(1+n/2)})),o}return 0},Ee=function(e,t,n,a,r){if(e){e.textAlign="right";var c=t.split(""),o=a;return c.forEach((function(t,a){var i=c[c.length-a-1];e.fillText(i,o,r),o-=e.measureText(i).width*(1+n/2)})),o}return a},Pe=function(e,t){if(e){e.font="16px stone-serif-regular";var n=function(e,t,n,a){var r=t.split(n),c=r.map((function(t){return e.measureText(t).width})),o=e.measureText(n).width,i=c.reduce((function(e,t){return e+t}),0),l={splittedContent:r,splittedWidth:c,symbolWidth:o,totalCondensableWidth:i,condenseRatio:1};return i>0&&(l.condenseRatio=Math.min((a-(c.length-1)*o)/i,1)),l}(e,t,"\xa9",257),a=n.splittedContent,r=n.splittedWidth,c=n.symbolWidth,o=n.condenseRatio;o<1?(e.textAlign="left",e.scale(o,1),a.reduce((function(t,n,i){e.fillText(n,t/o,777);var l=t+r[i]*o;return i<a.length-1&&(e.scale(1/o,1),e.fillText("\xa9",l,777),l+=c,e.scale(o,1)),l}),239),e.scale(1/o,1)):(e.textAlign="right",Ee(e,t,-.15,496/o,777)),e.textAlign="left"}},Fe=function(e,t,n,a){if(e){e.textAlign="left";var r="".concat(t).split("?"),c=r.reduce((function(t,n,a){e.font="25px MatrixBoldSmallCaps";var c=t+e.measureText(n).width;return a<r.length-1&&(e.font="25px matrix",c+=e.measureText("?").width),c}),0);if(c>0){var o=Math.min(49.94/c,1);e.scale(o,1),r.reduce((function(t,n,c,i){var l=i[i.length-1-c],s=t;return e.font="25px MatrixBoldSmallCaps",s-=e.measureText(l).width*o,e.fillText(l,s/o,a),c<r.length-1&&(e.font="bold 25px matrix",s-=e.measureText("?").width*o,e.fillText("?",s/o,a)),s}),n+49.94),e.scale(1/o,1)}}},Le=function(e,t,n,a){return function(r){if(e){var c=n.top,o=n.bracketSize,i=o.char,l=o.bracketOffsetTop,s="left"===a?1:-1;return e.font="bold ".concat(i,"px stone-serif-bold"),e.textAlign=a,e.fillText(t,r,c-l),r+e.measureText(t).width*s}return r}},Ae=function(e,t,n){return function(a){return e?a+t.iconSpace*("left"===n?1:-1):a}},Be=function(e,t,n,a){return function(r){if(e){var c=n.top,o=n.bracketSize.bracketSpace,i="left"===a?1:-1;return e.font="bold ".concat(o,"px stone-serif-bold"),e.textAlign=a,e.fillText(t,r,c),r+e.measureText(t).width*i}return r}},_e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,c=a.top,o=a.spaceSize,i=o.frontSpace,l=o.char,s=o.behindSpace,u=a.upperCaseScale,f=a.upperCaseSize,d=a.lowerCaseScale,h=a.lowerCaseSize,b=a.spaceScale,p="left"===r?1:-1,v=function(e,t){var n=t;return e.font="bold ".concat(i,"px stone-serif-bold"),e.fillText(" ",n,c),n+=e.measureText(" ").width*p,e.font="oblique bold ".concat(l,"px stone-serif-bold"),e.scale(.65,1),e.fillText("/",n/.65,c),n+=.65*e.measureText("/").width*p,e.scale(1/.65,1),e.font="bold ".concat(s,"px stone-serif-bold"),e.fillText(" ",n,c),n+=e.measureText(" ").width*p};return function(a){var o=a;return e?(e.textAlign=r,n||"right"!==r||(o=v(e,o)),t.split("").forEach((function(t,n,a){var i="left"===r?a[n]:a[a.length-1-n];if(/[A-Z]/.test(i))e.font="bold ".concat(f,"px stone-serif-bold"),e.scale(u,1),e.fillText(i,o/u,c),o+=e.measureText(i).width*u*p,e.scale(1/u,1);else if(/\s/.test(i))e.font="bold ".concat(h,"px stone-serif-bold"),e.scale(b,1),e.fillText(i,o/b,c),o+=e.measureText(i).width*b*p,e.scale(1/b,1);else{var l=i.toLocaleUpperCase();e.font="bold ".concat(h,"px stone-serif-bold"),e.scale(d,1),e.fillText(l,o/d,c),o+=e.measureText(l).width*d*p,e.scale(1/d,1)}})),n||"left"!==r||(o=v(e,o)),o):o}},ze={},Me=function(){var e=Object(d.a)(f.a.mark((function e(t,n,a,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",new Promise((function(e){return e(!1)})));case 2:return e.abrupt("return",new Promise((function(e){var c;if(!0===(null===(c=ze[n])||void 0===c?void 0:c.ready)){var o=ze[n].image,i="number"===typeof a?a:a(o),l="number"===typeof r?r:r(o);t.drawImage(o,i,l),e(!0)}else{var s=new Image;s.src="/ygocarder"+n,s.onload=function(){var c="number"===typeof a?a:a(s),o="number"===typeof r?r:r(s);t.drawImage(s,c,o),ze[n].ready=!0,e(!0)},s.onerror=function(){e(!1)},ze[n]={image:s,ready:!1}}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(d.a)(f.a.mark((function e(t,n,a,r,c,o){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",new Promise((function(e){return e(!1)})));case 2:return e.abrupt("return",new Promise((function(e){var i;if(!0===(null===(i=ze[n])||void 0===i?void 0:i.ready)){var l=ze[n].image,s="number"===typeof a?a:a(l),u="number"===typeof r?r:r(l);t.drawImage(l,s,u,c,o),e(!0)}else{var f=new Image;f.src="/ygocarder"+n,f.onload=function(){var i="number"===typeof a?a:a(f),l="number"===typeof r?r:r(f);t.drawImage(f,i,l,c,o),ze[n].ready=!0,e(!0)},f.onerror=function(){e(!1)},ze[n]={image:f,ready:!1}}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,o){return e.apply(this,arguments)}}(),De=n(169),Ye=n.n(De),He=n(338);var Xe=function(){var e,t=Object(r.useState)(!0),n=Object(h.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(""),u=Object(h.a)(i,2),v=u[0],g=u[1],y=Object(r.useState)(p),k=Object(h.a)(y,2),S=k[0],T=k[1],R=Object(r.useRef)(null),N=Object(r.useRef)(null),P=Object(r.useRef)(null),F=Object(r.useRef)(null),L=Object(r.useRef)(null),A=Object(r.useRef)(null),z=Object(r.useRef)(null),M=Object(r.useRef)(null),U=Object(r.useRef)(null),D=Object(r.useRef)(null),Y=Object(r.useRef)(null),H=Object(r.useRef)(null),X=Object(r.useRef)(null),G=Object(r.useRef)(null),W=Object(r.useRef)(null),K=Object(r.useRef)(null),J=Object(r.useRef)(null),V=S.frame,q=S.foil,Q=S.name,Z=S.nameStyleType,$=S.nameStyle,ee=S.pictureCrop,te=S.effect,ne=S.type_ability,ae=S.isPendulum,re=S.pendulum_effect,ce=S.blue_scale,oe=S.red_scale,ie=S.atk,le=S.def,se=S.link_map,ue=S.attribute,fe=S.subFamily,de=S.star,he=S.set_id,be=S.passcode,ve=S.isFirstEdition,me=S.creator,ge=S.sticker,xe="normal"===(e=S).frame&&w(e),ze=x(S),De=O(S),Xe=w(S),Ge="medium",We=Object(r.useRef)({frame:function(){return Promise.resolve()},star:function(){return Promise.resolve()},attribute:function(){return Promise.resolve()},specialFrame:function(){return Promise.resolve()},sticker:function(){return Promise.resolve()}}),Ke=Object(r.useState)(0),Je=Object(h.a)(Ke,2),Ve=Je[0],qe=Je[1];Object(r.useEffect)((function(){var e,t=null===(e=P.current)||void 0===e?void 0:e.getContext("2d");We.current.frame=Object(d.a)(f.a.mark((function e(){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===t||void 0===t||t.clearRect(0,0,549,800),n=C(V),a="normal"!==q,e.next=5,Me(t,"/asset/image/frame/frame-".concat(n,".png"),0,0);case 5:if(!a){e.next=11;break}return r=Te[q].art,e.next=9,Me(t,"/asset/image/frame/frame-art-".concat(q,".png"),r.left,120);case 9:return e.next=11,Me(t,"/asset/image/frame/frame-effect-".concat(q,".png"),0,580);case 11:case"end":return e.stop()}}),e)})))}),[q,V]),Object(r.useEffect)((function(){var e,t=null===(e=F.current)||void 0===e?void 0:e.getContext("2d"),n=R.current;n&&t&&(t.clearRect(0,0,548,650),ae?t.drawImage(n,38,144,474,470):t.drawImage(n,67,147,416,416))}),[ae,Ve]),Object(r.useEffect)((function(){var e,t=null===(e=L.current)||void 0===e?void 0:e.getContext("2d");We.current.specialFrame=Object(d.a)(f.a.mark((function e(){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t||t.clearRect(0,0,549,800),n="normal"!==q,a=C(V),!ae||De){e.next=12;break}if(ze){e.next=7;break}return e.next=7,Me(t,"/asset/image/pendulum/overlay-pendulum-".concat(a,".png"),0,0);case 7:return e.next=9,Me(t,"/asset/image/frame/frame-pendulum-".concat(Ge,".png"),0,0);case 9:if(!n){e.next=12;break}return e.next=12,Me(t,"/asset/image/frame/frame-pendulum-".concat(Ge,"-").concat(q,".png"),0,0);case 12:return r=n?"/asset/image/frame/frame-border-".concat(q,".png"):"/asset/image/frame/frame-border.png",e.next=15,Me(t,r,0,0);case 15:if(ae||!De){e.next=29;break}if(!n){e.next=21;break}return e.next=19,Me(t,"./asset/image/link/link-overlay-".concat(q,".png"),0,110);case 19:e.next=23;break;case 21:return e.next=23,Me(t,"/asset/image/link/link-overlay.png",66,146);case 23:if(!n){e.next=26;break}return e.next=26,Me(t,"/asset/image/link/link-overlay-arrow-".concat(q,".png"),0,110);case 26:return e.next=28,Promise.all(se.map((function(e){var a=Se[parseInt(e)-1],r=a.left,c=a.top,o=a.height,i=a.width;return Ue(t,n?"/asset/image/link/link-arrow-".concat(e,"-").concat(q,".png"):"/asset/image/link/link-arrow-".concat(e,".png"),r,c,i,o)})));case 28:t&&(t.textAlign="right",t.scale(1.2,1),t.font="bold 24px Yugioh Rush Duel Numbers V4",t.fillText("".concat(se.length),505/1.2,746),t.scale(1/1.2,1),t.textAlign="left");case 29:case"end":return e.stop()}}),e)})))}),[q,V,De,ae,ze,se]),Object(r.useEffect)((function(){var e,t=null===(e=H.current)||void 0===e?void 0:e.getContext("2d");We.current.attribute=function(){return null===t||void 0===t||t.clearRect(0,0,549,100),Me(t,"/asset/image/attribute/attr-".concat(ue.toLowerCase(),".png"),458,37)}}),[ue]),Object(r.useEffect)((function(){var e,t=null===(e=A.current)||void 0===e?void 0:e.getContext("2d");We.current.star=function(){if(null===t||void 0===t||t.clearRect(0,0,549,150),Xe&&!De){var e=Math.min(13,null!==de&&void 0!==de?de:0),n=ze?"rank":"level",a=-36.3636,r=34*e+2.3636*(e-1),c=e<=12?ze?23:492:ze?(549-r)/2-34:(549-r)/2+r;return Promise.all(Object(s.a)(Array(e)).map((function(){return a+=36.3636,Me(t,"/asset/image/sub-family/subfamily-".concat(n,".png"),c+(34+a)*(ze?1:-1),99)})))}if(!Xe){var o=fe.toUpperCase();return"NO ICON"!==o&&m.includes(o)?Ue(t,"/asset/image/sub-family/subfamily-".concat(o.toLowerCase(),".png"),(function(e){return 491-e.naturalWidth-7}),103,29,29):new Promise((function(e){return e(!0)}))}return new Promise((function(e){return e(!0)}))}}),[De,Xe,ze,de,fe]),Object(r.useEffect)((function(){var e,t=null===(e=z.current)||void 0===e?void 0:e.getContext("2d");if(null===t||void 0===t||t.clearRect(0,0,549,600),t&&ae){t.font="".concat(43,"px MatrixBoldSmallCaps"),t.textAlign="left",Re(t,null!==ce&&void 0!==ce?ce:0,57,575),Re(t,null!==oe&&void 0!==oe?oe:0,493,575)}}),[c,ce,ae,oe]),Object(r.useEffect)((function(){var e,t=null===(e=Y.current)||void 0===e?void 0:e.getContext("2d");if(t){var n;t.clearRect(0,0,549,100),t.textAlign="left";var a="auto"===Z?"normal"!==q?null!==(n=j[q])&&void 0!==n?n:b:Object(l.a)(Object(l.a)({},b),{},{fillStyle:ze?"#ffffff":"#000000"}):$;!function(e,t,n,a,r,c){if(e){e.fillStyle=c.fillStyle,c.hasShadow&&(e.shadowColor=c.shadowColor,e.shadowOffsetY=c.shadowOffsetY,e.shadowOffsetX=c.shadowOffsetX,e.shadowBlur=c.shadowBlur);var o=B(t).split(/([^&A-Za-z0-9\-/\s()])/g),i=o.reduce((function(t,n,a){return e.font=a%2===0?"64.59px MatrixRegularSmallCaps":"54.59px matrix",t+e.measureText(n).width}),0);if(i>0){var l=Math.min(r/i,1);e.scale(l,1),o.reduce((function(t,n,r){return e.font=r%2===0?"64.59px MatrixRegularSmallCaps":"small-caps 54.59px matrix",e.fillText(n,t/l,a),t+e.measureText(n).width*l}),n),e.scale(1/l,1)}e.fillStyle=b.fillStyle,e.shadowColor=b.shadowColor,e.shadowOffsetY=b.shadowOffsetY,e.shadowOffsetX=b.shadowOffsetX,e.shadowBlur=b.shadowBlur}}(t,Q,40.52,78,409,a)}}),[q,c,ze,Q,$,Z]),Object(r.useEffect)((function(){var e,t=null===(e=X.current)||void 0===e?void 0:e.getContext("2d");null===t||void 0===t||t.clearRect(0,0,549,800),Xe&&(Fe(t,ie,343.51,747),De||Fe(t,le,454.93,747))}),[c,ie,le,De,Xe]),Object(r.useEffect)((function(){var e,t=null===(e=G.current)||void 0===e?void 0:e.getContext("2d");null===t||void 0===t||t.clearRect(0,0,549,800),t&&(t.fillStyle=ze&&!ae?"#fff":"#000",t.font="15px stone-serif-regular",ae?Ie(t,he,-.1,45,746):De?Ie(t,he,-.1,364,590):Ee(t,he,-.1,492,589))}),[c,De,ae,ze,he]),Object(r.useEffect)((function(){var e,t=null===(e=W.current)||void 0===e?void 0:e.getContext("2d");if(null===t||void 0===t||t.clearRect(0,0,549,800),t){t.fillStyle=ze&&!ae?"#fff":"#000",t.font="15px stone-serif-regular";var n=Ie(t,be,.1,25,777);ve&&(t.fillStyle=ze&&!ae?"#fff":"#000",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:99;if(e){e.font="bold 16px palatino-linotype-bold";var n=t;e.fillText("1",n,777),n+=e.measureText("1").width-2,e.font="bold 12px palatino-linotype-bold",e.fillText("st",n,772),n+=e.measureText("st").width,e.font="bold 15px palatino-linotype-bold",e.fillText(" Edition",n,777)}}(t,n+10))}}),[ve,c,De,ae,ze,be]),Object(r.useEffect)((function(){var e,t=null===(e=K.current)||void 0===e?void 0:e.getContext("2d");null===t||void 0===t||t.clearRect(0,0,549,800),t&&(t.fillStyle=ze&&!ae?"#fff":"#000",Pe(t,me))}),[c,De,ae,ze,me]),Object(r.useEffect)((function(){var e,t=null===(e=J.current)||void 0===e?void 0:e.getContext("2d");We.current.sticker=function(){return null===t||void 0===t||t.clearRect(0,0,549,800),Me(t,"/asset/image/sticker/sticker-".concat(ge.toLowerCase(),".png"),499,750)}}),[ge]);var Qe=Object(r.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";if(e){var a;null===e||void 0===e||e.clearRect(0,0,549,700);var r=null!==(a=ke[t])&&void 0!==a?a:ke.medium,c=r.left,o=fe.toUpperCase(),i=[Le(e,"[",r,n),Be(e," ",r,n)].concat(Object(s.a)(ne.map((function(t,a){return _e(e,t,a===ne.length-1,r,n)}))),["large"===t?"NO ICON"===o?function(e){return e+4*("left"===n?1:-1)}:Ae(e,r,n):function(e){return e},Le(e,"]",r,n)]),l=("left"===n?i:i.reverse()).reduce((function(e,t){return t(e)}),c);e.textAlign="left",l>508&&"medium"===t&&Qe(e,"small",n)}}),[fe,ne]);Object(r.useEffect)((function(){var e,t,n=null===(e=D.current)||void 0===e?void 0:e.getContext("2d"),a=null===(t=U.current)||void 0===t?void 0:t.getContext("2d");if(null===n||void 0===n||n.clearRect(0,0,549,750),Xe){var r=Ne(n,te,!1,xe);Qe(a,0===r?"medium":"small")}else Ne(n,te,!1,!1,Ce,ye),Qe(a,"large","right")}),[c,Qe,te,Xe,xe]),Object(r.useEffect)((function(){var e,t=null===(e=M.current)||void 0===e?void 0:e.getContext("2d");null===t||void 0===t||t.clearRect(0,0,549,600),Xe&&ae&&Ne(t,re,!0,!1,Oe,we)}),[c,Xe,ae,re]),Object(r.useEffect)((function(){var e,t=null===(e=N.current)||void 0===e?void 0:e.getContext("2d");if(t){var n=window.devicePixelRatio;t.setTransform(n,0,0,n,0,0),t.imageSmoothingQuality="high",t.clearRect(0,0,549,800)}Ye.a.load({custom:{families:["stone-serif-bold","stone-serif-bold","stone-serif-regular","matrix","palatino-linotype-bold","MatrixBook","MatrixBoldSmallCaps","MatrixRegularSmallCaps","Yugioh Rush Duel Numbers V4"],urls:["asset/font.css"]},active:function(){try{var e=window.localStorage.getItem("card-version"),t=window.localStorage.getItem("card-data"),n=new URLSearchParams(window.location.search).get("data");n?(console.log("\ud83d\ude80 ~ file: app.tsx ~ line 512 ~ useEffect ~ reverseCardDataCondenser(urlParam)",E(n)),T(E(n))):null!==t&&"1.0.5"===e&&T(JSON.parse(t))}catch(a){T(p)}o(!1)},inactive:function(){g("Font could not be loaded"),o(!1)}})}),[]);var Ze=Object(r.useRef)({currentPipeline:Promise.resolve(),queuedPipeline:!1});Object(r.useEffect)((function(){var e,t=!0;!1===c&&(localStorage.setItem("card-data",JSON.stringify(S)),localStorage.setItem("card-version",null!==(e="1.0.5")?e:"unknown"),Object(d.a)(f.a.mark((function e(){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N.current){e.next=12;break}return null===(n=document.querySelector("#export-canvas-guard"))||void 0===n||n.setAttribute("style",""),Ze.current.queuedPipeline=!0,e.next=6,Ze.current.currentPipeline;case 6:if(!t){e.next=12;break}return Ze.current.currentPipeline=$e({isPendulum:ae}),Ze.current.queuedPipeline=!1,e.next=11,Ze.current.currentPipeline;case 11:t&&("string"===typeof(r=I(S))&&_("data",r),null===(a=document.querySelector("#export-canvas-guard"))||void 0===a||a.setAttribute("style","display: none"));case 12:case"end":return e.stop()}}),e)})))());return function(){t=!1}}));var $e=Object(r.useRef)(function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a,r,c,o,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isPendulum,a=void 0!==n&&n,r=N.current,c=null===r||void 0===r?void 0:r.getContext("2d"),o=function(e,t){return new Promise((function(n){if(e.current&&t){var a=e.current.toDataURL("image/png");if(a){var r=new Image;r.src=a,r.onload=function(){t.drawImage(r,0,0),n(!0)},r.onerror=function(){return n(!1)}}else n(!1)}else n(!1)}))},!r||!c){e.next=17;break}return c.clearRect(0,0,549,800),e.next=8,Promise.all(Object.values(We.current).map((function(e){return e()})));case 8:return e.next=10,o(P,c);case 10:return(i=R.current)&&c&&(a?c.drawImage(i,38,144,474,470):c.drawImage(i,67,147,416,416)),e.next=14,o(L,c);case 14:return l=[Y,H,A,z,M,U,D,X,G,W,K,J],e.next=17,Promise.all([l.map((function(e){return o(e,c)}))]);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).current;return Object(a.jsxs)("div",{className:"app-container",style:{backgroundImage:'url("'.concat("/ygocarder",'/asset/image/texture/debut-dark.png"), linear-gradient(180deg, #00000022, #00000044)')},children:[c&&Object(a.jsx)("div",{className:"full-loading",children:v.length>0?Object(a.jsx)("span",{style:{color:"#e04040"},children:v}):"Loading fonts and scripts..."}),Object(a.jsx)("div",{className:"card-filter-panel"}),!1===c&&Object(a.jsxs)(pe,{receivingCanvasRef:R.current,currentCard:S,onCardChange:T,defaultCropInfo:ee,onImageChange:function(e){qe((function(e){return e+1})),e&&T((function(t){return Object(l.a)(Object(l.a)({},t),{},{pictureCrop:e})}))},children:[Object(a.jsx)(je,{}),Object(a.jsx)("br",{})]}),Object(a.jsxs)("div",{className:"card-preview-panel",children:[Object(a.jsxs)("button",{className:"export-button",children:["Save Card:",Object(a.jsx)("br",{}),'Right click the card \u2192 "Save image as..." / "Copy Image"']}),Object(a.jsxs)("div",{className:"card-canvas-group",children:[Object(a.jsx)("canvas",{id:"export-canvas",ref:N,width:549,height:800}),Object(a.jsxs)("div",{id:"export-canvas-guard",children:[Object(a.jsx)("div",{className:"canvas-guard-alert",children:"Generating..."}),Object(a.jsx)(He.a,{})]}),Object(a.jsx)("canvas",{id:"frameCanvas",ref:P,width:549,height:800}),Object(a.jsx)("canvas",{id:"artCanvas",ref:F,width:549,height:650}),Object(a.jsx)("canvas",{id:"specialFrameCanvas",ref:L,width:549,height:800}),Object(a.jsx)("canvas",{id:"nameCanvas",ref:Y,width:549,height:100}),Object(a.jsx)("canvas",{id:"attributeCanvas",ref:H,width:549,height:100}),Object(a.jsx)("canvas",{id:"subFamilyCanvas",ref:A,width:549,height:150}),Object(a.jsx)("canvas",{id:"pendulumScaleCanvas",ref:z,width:549,height:600}),Object(a.jsx)("canvas",{id:"pendulumEffectCanvas",ref:M,width:549,height:600}),Object(a.jsx)("canvas",{id:"typeCanvas",ref:U,width:549,height:700}),Object(a.jsx)("canvas",{id:"effectCanvas",ref:D,width:549,height:750}),Object(a.jsx)("canvas",{id:"ADCanvas",ref:X,width:549,height:800}),Object(a.jsx)("canvas",{id:"setId",ref:G,width:549,height:800}),Object(a.jsx)("canvas",{id:"passcode",ref:W,width:549,height:800}),Object(a.jsx)("canvas",{id:"creator",ref:K,width:549,height:800}),Object(a.jsx)("canvas",{id:"sticker",ref:J,width:549,height:800}),Object(a.jsx)("canvas",{className:"crop-canvas",ref:R})]})]})]})},Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,340)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Xe,{})}),document.getElementById("root")),Ge()}},[[325,1,2]]]);
//# sourceMappingURL=main.6704b302.chunk.js.map